<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>按比例自动缩放图片</title>

<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="draw.js"></script>
<script>
var isRotate=1;
drag = 0
move = 0
// 拖拽对象
var ie=document.all;
var nn6=document.getElementById&&!document.all;
var isdrag=false;
var y,x;
var oDragObj;

function moveMouse(e) {
	 if (isdrag) {
	 	oDragObj.style.top  =  (nn6 ? nTY + e.clientY - y : nTY + event.clientY - y)+"px";
		 oDragObj.style.left  =  (nn6 ? nTX + e.clientX - x : nTX + event.clientX - x)+"px";
	 	return false;
	 }
}

function initDrag(e) {
	 var oDragHandle = nn6 ? e.target : event.srcElement;
	 var topElement = "HTML";
	 while (oDragHandle.tagName != topElement && oDragHandle.className != "dragAble") {
		 oDragHandle = nn6 ? oDragHandle.parentNode : oDragHandle.parentElement;
	 }
	 if (oDragHandle.className=="dragAble") {
		 isdrag = true;
		 oDragObj = oDragHandle;
		 nTY = parseInt(oDragObj.style.top+0);
		 y = nn6 ? e.clientY : event.clientY;
		 nTX = parseInt(oDragObj.style.left+0);
		 x = nn6 ? e.clientX : event.clientX;
		 document.onmousemove=moveMouse;
		 return false;
	 }
}
document.onmousedown=initDrag;
document.onmouseup=new Function("isdrag=false");
</script>
</head>

<body>
<div id="imgBox" style="width:500px; height:400px; background:#cccccc; overflow:hidden">
    <img id="img1" alt="" src="1.jpg" onload="DrawImg(500,400);" />
</div>
<DIV style='wi'>
<div id="block1" onmouseout="drag=0" onmouseover="dragObj=block1; drag=1;" style="z-index:10; height: 0; top:40px; left:50px; position: absolute;  width: 0;" class="dragAble"> 
	<img name="images1" id =\'images1\' style="position:relative; zoom:100%; top:40px; left:50px; z-index:99  cursor:move;" src='1.jpg' border=\'0\'>
</div>
</DIV>
</body>
</html>